jQuery.aqi={aqi:function(o){function r(o,r){return{lo:_.iaqi[o],hi:_.iaqi[r]}}function n(o,r){for(var n=_[o],e=0;e<n.length;e++)if(r<=n[e]){if(0===e)return null;var i=e-1;return{loIndex:i,lo:n[i],hiIndex:e,hi:n[e]}}return null}function e(o){var r=[];if(o.length<=0)return r;if(o[0].value<=50)return r;for(var n=0,e=0;e<o.length;e++){var a=i(o[e].element);""!==a&&(r[n++]=a)}return r}function i(o){switch(o){case a.so2_24:case a.so2:return"SO2";case a.no2_24:case a.no2:return"NO2";case a.pm10_24:return"PM10";case a.co_24:case a.co:return"CO";case a.o3:case a.o3_8:return"O3";case a.pm25_24:case a.pm25:return"PM2.5"}return""}var a={so2_24:"so2_24",so2:"so2",no2_24:"no2_24",no2:"no2",pm10_24:"pm10_24",co_24:"co_24",co:"co",o3:"o3",o3_8:"o3_8",pm25_24:"pm25_24"},l={};l.iaqi=[0,50,100,150,200,300,400,500],l[a.so2_24]=[0,50,150,475,800,1600,2100,2620],l[a.so2]=[0,150,500,650,800],l[a.no2_24]=[0,40,80,180,280,565,750,940],l[a.no2]=[0,100,200,700,1200,2340,3090,3840],l[a.pm10_24]=[0,50,150,250,350,420,500,600],l[a.co_24]=[0,2,4,14,24,36,48,60],l[a.co]=[0,5,10,35,60,90,120,150],l[a.o3]=[0,160,200,300,400,800,1e3,1200],l[a.o3_8]=[0,100,160,215,265,800],l[a.pm25_24]=[0,35,75,115,150,250,350,500];var t={daily:[a.so2_24,a.no2_24,a.pm10_24,a.co_24,a.o3,a.o3_8,a.pm25_24],hour:[a.so2,a.no2,a.pm10_24,a.co,a.o3,a.o3_8,a.pm25_24]};void 0===o&&(o="daily");var u=t[o],_={};_.iaqi=l.iaqi;for(var c=0;c<u.length;c++)_[u[c]]=l[u[c]];return{getPrimaryPollutant:function(o){var i=[];for(var a in _){var l=a.replace("_24","");if(void 0!==o[a]&&"iaqi"!=a){var t=o[l],u=n(a,t);if(null!==u){var c=r(u.loIndex,u.hiIndex),v=(c.hi-c.lo)/(u.hi-u.lo)*(t-u.lo)+c.lo,s=i.length,f={element:a,value:v};0===s?i[0]=f:i[0].value==v?i[s]=f:i[0].value<v&&(i=[f])}}}return e(i)},getAqi:function(o){var e=0;for(var i in _)if(void 0!==o[i]&&"iaqi"!=i){var a=o[i],l=n(i,a);if(null!==l){var t=r(l.loIndex,l.hiIndex),u=(t.hi-t.lo)/(l.hi-l.lo)*(a-l.lo)+t.lo;u>e&&(e=u)}}return e}}}};